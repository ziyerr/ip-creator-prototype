# ğŸš€ Vercel è‡ªåŠ¨éƒ¨ç½²é…ç½®

## ğŸ“‹ éƒ¨ç½²çŠ¶æ€

- **ç”Ÿäº§ç¯å¢ƒ**: https://ip-creator-ziyerrs-projects.vercel.app
- **è‡ªåŠ¨éƒ¨ç½²**: âœ… å·²é…ç½®
- **éƒ¨ç½²è§¦å‘**: æ¨é€åˆ° `main` åˆ†æ”¯
- **æ„å»ºæ—¶é—´**: ~2-3 åˆ†é’Ÿ

## ğŸ”§ é…ç½®è¯¦æƒ…

### Vercel é…ç½® (`vercel.json`)

```json
{
  "functions": {
    "app/api/generate-image/route.ts": {
      "maxDuration": 30
    },
    "app/api/generate-single-image/route.ts": {
      "maxDuration": 60
    }
  },
  "rewrites": [
    {
      "source": "/api/(.*)",
      "destination": "/api/$1"
    }
  ],
  "headers": [
    {
      "source": "/outputs/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=86400"
        }
      ]
    }
  ]
}
```

### å…³é”®é…ç½®è¯´æ˜

1. **å‡½æ•°è¶…æ—¶è®¾ç½®**:
   - `generate-image`: 30ç§’ï¼ˆå¿«é€Ÿç”Ÿæˆï¼‰
   - `generate-single-image`: 60ç§’ï¼ˆVercelå…è´¹è®¡åˆ’é™åˆ¶ï¼‰

2. **é™æ€æ–‡ä»¶ç¼“å­˜**:
   - `/outputs/` ç›®å½•ä¸‹çš„å›¾ç‰‡æ–‡ä»¶ç¼“å­˜24å°æ—¶
   - æé«˜å›¾ç‰‡åŠ è½½æ€§èƒ½

3. **API è·¯ç”±é‡å†™**:
   - ç¡®ä¿ API ç«¯ç‚¹æ­£ç¡®è·¯ç”±

## ğŸ”„ è‡ªåŠ¨éƒ¨ç½²æµç¨‹

### 1. GitHub â†’ Vercel é›†æˆ

å½“ä½ æ¨é€ä»£ç åˆ° GitHub çš„ `main` åˆ†æ”¯æ—¶ï¼š

1. **è§¦å‘æ„å»º**: Vercel è‡ªåŠ¨æ£€æµ‹åˆ°ä»£ç æ›´æ”¹
2. **å®‰è£…ä¾èµ–**: `npm install`
3. **æ„å»ºé¡¹ç›®**: `npm run build`
4. **éƒ¨ç½²**: å°†æ„å»ºäº§ç‰©éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
5. **æ›´æ–° URL**: ç”Ÿäº§ç¯å¢ƒç«‹å³å¯ç”¨

### 2. GitHub Actions å·¥ä½œæµ

é¢å¤–çš„ CI/CD æµç¨‹ (`.github/workflows/vercel-deploy.yml`):

- **æ„å»ºéªŒè¯**: ç¡®ä¿ä»£ç å¯ä»¥æˆåŠŸæ„å»º
- **å¥åº·æ£€æŸ¥**: éƒ¨ç½²åéªŒè¯ç½‘ç«™å¯è®¿é—®æ€§
- **API æµ‹è¯•**: éªŒè¯ API ç«¯ç‚¹æ­£å¸¸å·¥ä½œ

## ğŸ› ï¸ ç¯å¢ƒå˜é‡é…ç½®

### å¿…éœ€çš„ç¯å¢ƒå˜é‡

åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­é…ç½®ï¼š

```bash
MAQUE_API_KEY=your-api-key-here
```

### GitHub Secrets (å¯é€‰ï¼Œç”¨äº GitHub Actions)

```bash
VERCEL_TOKEN=your-vercel-token
VERCEL_ORG_ID=your-org-id
VERCEL_PROJECT_ID=your-project-id
```

## ğŸ“Š éƒ¨ç½²ç›‘æ§

### å®æ—¶çŠ¶æ€æ£€æŸ¥

ä½¿ç”¨ `check-deployment.html` å·¥å…·ï¼š
- æ£€æŸ¥ç”Ÿäº§ç¯å¢ƒçŠ¶æ€
- æµ‹è¯• API ç«¯ç‚¹
- ç›‘æ§éƒ¨ç½²å¥åº·çŠ¶å†µ

### Vercel ä»ªè¡¨æ¿

è®¿é—® [Vercel Dashboard](https://vercel.com/dashboard) æŸ¥çœ‹ï¼š
- éƒ¨ç½²å†å²
- æ„å»ºæ—¥å¿—
- æ€§èƒ½æŒ‡æ ‡
- é”™è¯¯ç›‘æ§

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **éƒ¨ç½²å¤±è´¥**:
   ```bash
   # æ£€æŸ¥æ„å»ºæ—¥å¿—
   npx vercel logs
   ```

2. **API è¶…æ—¶**:
   - æ£€æŸ¥ `vercel.json` ä¸­çš„ `maxDuration` è®¾ç½®
   - ç¡®ä¿ API å‡½æ•°åœ¨æ—¶é—´é™åˆ¶å†…å®Œæˆ

3. **ç¯å¢ƒå˜é‡é—®é¢˜**:
   - åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­éªŒè¯ç¯å¢ƒå˜é‡
   - ç¡®ä¿ `MAQUE_API_KEY` æ­£ç¡®è®¾ç½®

4. **æ–‡ä»¶å­˜å‚¨é—®é¢˜**:
   - Vercel çš„æ— æœåŠ¡å™¨ç¯å¢ƒä¸æ”¯æŒæŒä¹…æ–‡ä»¶å­˜å‚¨
   - ç”Ÿæˆçš„å›¾ç‰‡æ–‡ä»¶åœ¨æ¯æ¬¡éƒ¨ç½²åä¼šä¸¢å¤±
   - è€ƒè™‘ä½¿ç”¨äº‘å­˜å‚¨æœåŠ¡ï¼ˆå¦‚ AWS S3ã€Cloudinaryï¼‰

### æ‰‹åŠ¨éƒ¨ç½²

å¦‚æœè‡ªåŠ¨éƒ¨ç½²å¤±è´¥ï¼Œå¯ä»¥æ‰‹åŠ¨éƒ¨ç½²ï¼š

```bash
# å®‰è£… Vercel CLI
npm install -g vercel

# ç™»å½• Vercel
vercel login

# éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
vercel --prod
```

## ğŸ”® æœªæ¥ä¼˜åŒ–

### å»ºè®®çš„æ”¹è¿›

1. **äº‘å­˜å‚¨é›†æˆ**:
   - é›†æˆ AWS S3 æˆ– Cloudinary
   - æŒä¹…åŒ–å›¾ç‰‡æ–‡ä»¶å­˜å‚¨

2. **CDN ä¼˜åŒ–**:
   - ä½¿ç”¨ Vercel Edge Network
   - å…¨çƒå›¾ç‰‡åˆ†å‘åŠ é€Ÿ

3. **ç›‘æ§å‘Šè­¦**:
   - é›†æˆ Vercel Analytics
   - è®¾ç½®éƒ¨ç½²å¤±è´¥é€šçŸ¥

4. **A/B æµ‹è¯•**:
   - ä½¿ç”¨ Vercel Preview éƒ¨ç½²
   - æµ‹è¯•æ–°åŠŸèƒ½åå†å‘å¸ƒ

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°éƒ¨ç½²é—®é¢˜ï¼š

1. æ£€æŸ¥ [Vercel æ–‡æ¡£](https://vercel.com/docs)
2. æŸ¥çœ‹é¡¹ç›®çš„æ„å»ºæ—¥å¿—
3. ä½¿ç”¨ `check-deployment.html` å·¥å…·è¯Šæ–­
4. è”ç³»å¼€å‘å›¢é˜Ÿè·å–æ”¯æŒ
